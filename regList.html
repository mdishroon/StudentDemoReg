<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Demo Registration List</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <h1>Registered Students</h1>

    <table>
      <thead>
        <tr>
          <th>Student ID</th>
          <th>Name</th>
          <th>Project Description</th>
          <th>Email</th>
          <th>Phone</th>
          <th>Time Slot</th>
        </tr>
      </thead>
      <tbody id="studentTableBody">
        <!-- PHP or JavaScript backend should dynamically populate rows here -->
        <!-- Example row -->
        <tr>
          <td>12345678</td>
          <td>Mollie D</td>
          <td>Microsoft Azure Integration on Campus</td>
          <td>mols@example.com</td>
          <td>123-456-7890</td>
          <td>10:00 AM – 10:30 AM</td>
        </tr>
      </tbody>
    </table>
  
    <a href="index.html"><button id="backBtn">← Back to Registration</button></a>

    <script>
        async function loadStudents() {
          try {
            const response = await fetch("/api/students");
            if (!response.ok) throw new Error("Failed to fetch student data.");
    
            const students = await response.json();
            const tbody = document.getElementById("studentTableBody");
    
            // Clear any existing rows
            tbody.innerHTML = "";
    
            // Populate rows
            students.forEach((student) => {
              const row = document.createElement("tr");
              row.innerHTML = `
                <td>${student.student_id}</td>
                <td>${student.name}</td>
                <td>${student.project_name}</td>
                <td>${student.email}</td>
                <td>${student.phone_number}</td>
                <td>${student.demo_slot}</td>
              `;
              tbody.appendChild(row);
            });
          } catch (err) {
            console.error("Error loading student list:", err);
            const tbody = document.getElementById("studentTableBody");
            tbody.innerHTML = `<tr><td colspan="6">Unable to load students.</td></tr>`;
          }
        }
    
        loadStudents();
      </script>

</body>

</html>